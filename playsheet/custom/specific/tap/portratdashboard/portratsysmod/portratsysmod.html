<portratinfobox class="prd-data-blu-info">
    <table class="prd-table full-width">
        <tr class="default-cursor" ng-init="hoverDiv=false">
            <td class="bold">BLUs Provided:</td>
            <td class="pull-right">{{dataBluInfo.bluProvided.length}}
            </td>
            <td>
                <i class="fa fa-search fa-1 pointer xs-left-padding" ng-click="hoverDiv = !hoverDiv; hoverDiv1=false; hoverDiv2=false; hoverDiv3=false"></i>
                <div class="arrow-left" ng-class="{'visible': hoverDiv === true, 'hidden':hoverDiv===false}"></div>
                <div class="hover-div" ng-class="{'visible': hoverDiv === true, 'hidden':hoverDiv===false}">
                    <p class="hover-header">BLUs Provided:</p>

                    <div class="xs-padding hover-content">
                        <p ng-repeat="blu in dataBluInfo.bluProvided" class="hover-info">{{blu | shortenValueFilter | replaceUnderscores}} </p>
                    </div>
                </div>
            </td>
        </tr>
        <tr class="default-cursor" ng-init="hoverDiv1=false">
            <td class="bold">Data Objects:</td>
            <td class="pull-right">{{dataBluInfo.dataProvided.length}}</td>
            <td>
                <i class="fa fa-search fa-1 pointer xs-left-padding" ng-click="hoverDiv1 = !hoverDiv1; hoverDiv=false; hoverDiv2=false; hoverDiv3=false"</i>
                <div class="arrow-left" ng-class="{'visible': hoverDiv1 === true, 'hidden':hoverDiv1===false}"></div>
                <div class="hover-div" ng-class="{'visible': hoverDiv1 === true, 'hidden':hoverDiv1===false}">
                    <p class="hover-header">Data Objects:</p>

                    <div class="xs-padding hover-content">
                        <p ng-repeat="io in dataBluInfo.dataProvided" class="hover-info">{{io | shortenValueFilter | replaceUnderscores}} </p>
                    </div>
                </div>
            </td>
        </tr>
        <tr class="default-cursor" ng-init="hoverDiv2=false">
            <td class="bold">Upstream Systems:</td>
            <td class="pull-right">{{dataBluInfo.upstreamSystems.length}}
            </td>
            <td>
                <i class="fa fa-search fa-1 pointer xs-left-padding" ng-click="hoverDiv2 = !hoverDiv2; hoverDiv1=false; hoverDiv=false; hoverDiv3=false"></i>
                <div class="arrow-left" ng-class="{'visible': hoverDiv2 === true, 'hidden':hoverDiv2===false}"></div>
                <div class="hover-div" ng-class="{'visible': hoverDiv2 === true, 'hidden':hoverDiv2===false}">
                    <p class="hover-header">Upstream Systems:</p>

                    <div class="xs-padding hover-content">
                        <p ng-repeat="sys in dataBluInfo.upstreamSystems track by $index" class="hover-info">{{sys.name |
                            shortenValueFilter | replaceUnderscores | reduceStringLength: 17}}
                            <i title="{{sys.ind}}" class="pull-right"
                               ng-class="{'prd-syspanel-decom fa fa-circle': sys.ind === 'Recommended Consolidation', 'prd-syspanel-modern fa fa-circle': sys.ind === 'Recommended Sustain', 'prd-syspanel-none fa fa-circle-o': sys.ind === 'Included'}"> </i>
                        </p>
                    </div>
                </div>
            </td>
        </tr>
        <tr class="default-cursor" ng-init="hoverDiv3=false">
            <td class="bold">Downstream Systems:</td>
            <td class="pull-right">{{dataBluInfo.downstreamSystems.length}}
            </td>
            <td>
                <i class="fa fa-search fa-1 pointer xs-left-padding" ng-click="hoverDiv3 = !hoverDiv3; hoverDiv1=false; hoverDiv2=false; hoverDiv=false"></i>
                <div class="arrow-left" ng-class="{'visible': hoverDiv3 === true, 'hidden':hoverDiv3===false}"></div>
                <div class="hover-div" ng-class="{'visible': hoverDiv3 === true, 'hidden':hoverDiv3===false}">
                    <p class="hover-header">Downstream Systems:</p>

                    <div class="xs-padding hover-content">
                        <p ng-repeat="sys in dataBluInfo.downstreamSystems track by $index" class="hover-info">
                            {{sys.name | shortenValueFilter | replaceUnderscores | reduceStringLength: 17}}
                            <i title="{{sys.ind}}" class="pull-right"
                               ng-class="{'prd-syspanel-decom fa fa-circle': sys.ind === 'Recommended Consolidation', 'prd-syspanel-modern fa fa-circle': sys.ind === 'Recommended Sustain', 'prd-syspanel-none fa fa-circle-o': sys.ind === 'Included'}"> </i>
                        </p>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="bold">Hosting: </td>
            <td class="pull-right" style="margin-right: -15px;"> {{dataBluInfo.hosting}}</td>
        </tr>
    </table>
</portratinfobox>
<portratinfobox class="prd-budget-info">
    <div class="bold lg-font" style="text-align:center;">Change in Annual Sustainment: </div>
    <div class="bold" ng-class="{'prd-systitle-decom': budgetInfoChangeNumVal < 0, 'prd-systitle-modern': budgetInfoChangeNumVal >= 0}" style="text-align:center;"> {{budgetInfoChangeNumVal | currency:"$":2 }}</div>
    <table class="prd-table full-width">
        <tr>
            <td class="bold">Current Annual Sustainment Cost: </td>
            <td class="pull-right"> {{budgetInfo.formattedCurrentSustVal}}</td>
        </tr>
        <tr>
            <td class="bold">Future Annual Sustainment Cost: </td>
            <td class="pull-right"> {{budgetInfo.formattedFutureSustVal}}</td>
        </tr>
        <tr>
            <td class="bold">Overall Cost of Action: </td>
            <td class="pull-right"> {{budgetInfo.formattedCostVal}}</td>
        </tr>
    </table>
</portratinfobox>
<portratcontainer label="'Portfolio Future State Map'" class="prd-action-map">
    <div class="prd-action-map-container">
        <portratchart port-rat-esri-map unique-id="modMap" portratsystem-map container="{}" container-class="'prd-action-map-container'" data="recommendedActionMapData" sidebar-active="sidebarShow" chart="'sysmod'" 
            zoom="3" basemap="streets" visual-type="'WorldMap'" view-type="'special'"></portratchart>
    </div>
</portratcontainer>
<portratcontainer label="'Portfolio Transition Details'" class="prd-health-systems">
    <div class="prd-appgrid" ng-if="healthGridData != undefined">
        <portratchart portratscatterplot unique-id="healthGrid" container-class="'prd-appgrid'" data="healthGridData" sidebar-active="false" show-title="false" unique-id="" 
            visual-type="'ScatterChart'" view-type="'special'"></portratchart>
    </div>
</portratcontainer>
<portratcontainer label="'Data and BLU System Coverage'" class="prd-system-coverage">
    <div class="prd-appgrid">
        <div class="btn-group toggle-switch datablucov" style="margin-left:25%;z-index:200">
            <div class="btn md-btn btn-light" ng-click="setView('coverage')" ng-class="{toggled: tabIndex === 'coverage'}">System Coverage </div>
            <!--<div class="btn md-btn btn-light" ng-click="setView('split')" ng-class="{toggled: tabIndex === 'split'}">Split System View </div>-->
            <div class="btn md-btn btn-light" ng-click="setView('detailed')" ng-class="{toggled: tabIndex === 'detailed'}">DO and BLU View </div>
        </div>
        <div>
            <portratchart system-coverage unique-id="sysCoverage" data="systemCoverageData" container-class="'prd-appgrid'"  visual-type="'customCluster'" view-type="'special'"></portratchart>
        </div>
    </div>
</portratcontainer>
