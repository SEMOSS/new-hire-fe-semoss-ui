<div class="pull-right full-width viz-group-bar-container">
    <div class="widget-top-toolbar">
        <div class="widget-group-bar-long visual-panel-bar">
            <div ng-repeat="viz in visualPanel.visualizationsList track by $index"
                 class="white-fill widget-visual-panel-handle pointer"
                 ng-if="viz.display.options.showOnVisualPanel"
                 ng-click="visualPanel.setVisualType(viz.layout);"
                 ng-class="{'selected':visualPanel.selectedLayout === viz.layout}">

                <img class="img-responsive pointer" ng-src="{{viz.image}}" title="{{viz.display.title}}" alt="{{viz.display.title}}">

                <!--<button class="btn-light widget-button pointer-cursor widget-viz-button">-->
                <!--<img class="img-responsive pointer" ng-src="{{viz.svgSrc}}" title="{{viz.title}}"-->
                <!--ng-class="{'selected':visualPanel.selectedLayout === viz.layout}">-->
                <!--</button>-->
            </div>
        </div>
    </div>
</div>

<div class="widget-sidebar-pop-out visual"
     ng-if="visualPanel.selectedLayout !== 'create' && visualPanel.selectedLayout !== 'Grid'"
     style="width:700px; height:100%">

    <!--<button class="btn btn-full btn-green" ng-click="visualPanel.toggleVisualPanel()">Tools</button>-->
    <loading-screen loading-screen-show="visualPanel.loadScreen"></loading-screen>

    <!--Left Column-->
    <div class="visual-selections-selected">
        <div class="visual-panel-selections-container xs-padding">
            <div class="viz-header">
                Chart Options
                <div class="float-right underline pointer no-select" ng-show="true"
                     ng-click="visualPanel.clearAllOptions()">
                    Clear
                </div>
            </div>
            <div class="visual-data-container">
                <div class="param-container" ng-repeat="param in visualPanel.displayedVisualOptionList track by $index">
                    <p class="xs-margin float-left" id="{{ param.label }}">
                        <span>{{param.label}}</span>
                        <span class="float-right xxs-font">{{param.data.length}} / {{param.multiField ? 0 : 1}}</span>
                    </p>


                    <div ui-sortable="visualPanel.sortableOptions" ng-model="param.data"
                         class="visual-option-drop visual-bind-content">
                        <div class="visual-btn-fixed not-sortable" id="{{ option.title }}"
                             ng-repeat="option in param.data track by $index">

                            <div class="remove-button">
                                <i class="fa fa-times pointer black"
                                   ng-click="visualPanel.clearVisualOption(param, option)" ng-show="true > 0"></i>
                            </div>
                            <div class="visual-dropdown-button" ng-if="option.grouping">
                                <div uib-dropdown>
                                    <button type="button" class="full-width btn-light" uib-dropdown-toggle>
                                        <span class="caret no-margin"></span>
                                    </button>
                                    <ul class="dropdown-menu visual-dropdown" uib-dropdown-menu role="menu"
                                        aria-labelledby="btn-append-to-single-button">
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'Average', 'disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'Average')">
                                            <a>Average</a>
                                        </li>
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'StandardDeviation', 'disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'StandardDeviation')">
                                            <a>Standard Deviation</a>
                                        </li>
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'Sum','disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'Sum')">
                                            <a>Sum</a>
                                        </li>
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'Max','disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'Max')">
                                            <a>Max</a>
                                        </li>
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'Median','disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'Median')">
                                            <a>Median</a>
                                        </li>
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'Min','disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'Min')">
                                            <a>Min</a>
                                        </li>
                                        <li role="menuitem"
                                            ng-class="{'selected':option.grouping === 'Count','disabled':option.disabled}"
                                            ng-click="visualPanel.changeGrouping(option,'Count')">
                                            <a>Count</a>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                            <div class="button-content">
                                <div class="visual-type-icon">
                                    <i class="fa fa-font" ng-if="option.type==='STRING'"></i>
                                    <i class="fa fa-hashtag" ng-if="option.type==='NUMBER'"></i>
                                    <i class="fa fa-calendar" ng-if="option.type==='DATE'"></i>
                                </div>
                                <div class="text-align-left visual-type-text"
                                     title="{{option.title|replaceUnderscores}}">
                                    {{ option.title | replaceUnderscores }}
                                </div>
                            </div>

                        </div>
                        <div class="inline"
                             ng-if="param.label === 'Value' || param.label === 'Dimension' || param.label === 'Tooltip' || param.data.length === 0">
                            <div class="drag-text"> Drag Option to Add</div>
                            <i class="fa fa-plus" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Right Column-->
    <div class="visual-selections-data">
        <div class="visual-panel-options-container xs-padding">
            <button class="xs-btn btn-light pull-left xs-margin" ng-click="visualPanel.toggleAutoDraw()">Auto
                {{visualPanel.autoDraw ? 'Off' : 'On'}}
            </button>
            <button class="xs-btn btn-light pull-right xs-margin" ng-class="{'disabled': visualPanel.autoDraw}"
                    ng-click="visualPanel.checkRequiredSelections()">
                Visualize
            </button>
            <div class="viz-header">
                Dimensions
            </div>
            <div ui-sortable="visualPanel.sortableOptions" class="sortable-options-list"
                 ng-model="visualPanel.selectedData.headers">
                <div ng-repeat="opt in visualPanel.selectedData.headers | orderBy: 'toString()' track by $index"
                     class="visual-btn-move" id="{{ opt }}-list" ng-dblclick="visualPanel.quickSelect(opt)">
                    <div class="visual-type-icon">
                        <i class="fa fa-font" ng-if="opt.type==='STRING'"></i>
                        <i class="fa fa-hashtag" ng-if="opt.type==='NUMBER'"></i>
                        <i class="fa fa-calendar" ng-if="opt.type==='DATE'"></i>
                    </div>
                    {{ opt.title }}
                </div>
            </div>
        </div>
    </div>
</div>