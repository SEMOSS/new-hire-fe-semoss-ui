<div class="widget-builder">
    <!--Edit JSON-->
    <smss-btn
        ng-click="widgetBuilder.editJSON()"
        class="smss-btn--icon widget-builder__edit"
        title="Edit JSON"
        ng-show="!widgetBuilder.showJSON"
    >
        <i class="fa fa-edit"></i>
    </smss-btn>
    <!-- JSON FREETEXT INPUT -->
    <div class="widget-builder__json" ng-hide="!widgetBuilder.showJSON">
        <p class="smss-spacing">
            Create a default widget defined by the json below.
        </p>
        <smss-field class="widget-builder__json__textarea">
            <label> Enter JSON: </label>
            <content>
                <smss-textarea
                    class="smss-textarea--bordered"
                    ng-model="widgetBuilder.freeTextInput"
                    name="query_input"
                >
                </smss-textarea>
            </content>
        </smss-field>
        <div class="smss-action">
            <smss-btn
                class="smss-btn--text"
                title="Preview JSON on the side"
                ng-click="widgetBuilder.previewJSONInput();"
                ng-disabled="!widgetBuilder.freeTextInput"
            >
                Preview
            </smss-btn>
            <smss-btn
                title="Add JSON on the current panel"
                ng-click="widgetBuilder.addJSON();"
                ng-disabled="!widgetBuilder.freeTextInput"
            >
                Add
            </smss-btn>
        </div>
    </div>

    <!-- PARAMETERS INPUT -->
    <smss-scroll
        ng-if="widgetBuilder.json && widgetBuilder.json.length > 0 && !widgetBuilder.showJSON"
    >
        <widget-compiler
            json="widgetBuilder.json"
            handle="widgetBuilder.handle"
            widget-id="widgetCtrl.widgetId"
        ></widget-compiler>
    </smss-scroll>
</div>
