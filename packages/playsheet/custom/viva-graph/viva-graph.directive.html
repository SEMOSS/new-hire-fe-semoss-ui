<div ng-show="chartCtrl.vivaGraph.vivaGraphOptions.showPropertiesTable" 
     id="graph-prop-table-resizer-" resizer="'horizontal'" resizer-width="2" resizer-bottom="'resizerPropTable-'"
     class="graph-prop-table-resizer"></div>

<!--Node properties table-->
<div ng-show="chartCtrl.vivaGraph.vivaGraphOptions.showPropertiesTable" class="table-container full-width" 
     ng-class="{'side-menu-shown': chartCtrl.sidebarActive, 'side-menu-hidden':! chartCtrl.sidebarActive}"
     id="resizerPropTable-">
    <div class="prop-row">
        <div class="col-xs-4 side-padding" ng-class="{'col-xs-3': chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length > 0}">
            <div class="base-table-header">Label Display</div>
            <div class="prop-table-wrapper base-table-content">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Type</th>
                        <th>
                            <!-- This exists in tools right now -->
                            <!-- <label class="pull-right">
                                <input type="checkbox" ng-model="chartCtrl.vivaGraph.labelToggle" ng-change="chartCtrl.vivaGraph.internalControl.toggleAllLabelSwitch()">
                                Show Labels
                            </label> -->
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="typeProperties in chartCtrl.vivaGraph.vivaGraphOptions.type.properties">
                        <td title="{{typeProperties.name}}" aria-label="{{typeProperties.name}}">
                            <span ng-bind="typeProperties.name | replaceUnderscores | reduceStringLength: 18"></span>
                        </td>
                        <td>
                            <select class='form-control' ng-model="chartCtrl.vivaGraph.vivaGraphOptions.type.properties[$index].selected"
                                    ng-change="chartCtrl.vivaGraph.setCurrentLabels(typeProperties.name, chartCtrl.vivaGraph.vivaGraphOptions.type.properties[$index].selected)"
                                    ng-options="value | replaceUnderscores for value in typeProperties.values">
                            </select>
                            <!-- <ui-select class='ng-pristine' ng-model="chartCtrl.vivaGraph.vivaGraphOptions.type.properties[$index].selected" ng-change="chartCtrl.vivaGraph.setCurrentLabels(typeProperties.name, chartCtrl.vivaGraph.vivaGraphOptions.type.properties[$index].selected)">
                                <ui-select-match class="ui-select-match">
                                    <span class="overflow-ellipsis-ui-select" ng-bind="$select.selected"></span>
                                </ui-select-match>
                                <ui-select-choices class="ui-select-choices"
                                                   repeat="value in typeProperties.values | filter: $select.search">
                                    <span class="overflow-ellipsis-ui-select" ng-bind="value"></span>
                                </ui-select-choices>
                            </ui-select> -->
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Node Properties -->
        <div class="col-xs-4 side-padding" ng-show="chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length > 0" ng-class="{'col-xs-3': chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length > 0}">
            <div class="base-table-header">Node Properties</div>
            <div class="prop-table-wrapper base-table-content">
                <div class="center" ng-if="chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length === 0">None Available</div>
                <table class="table" ng-if="chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length > 0">
                    <thead>
                    <th class="table-half">Name</th>
                    <th class="table-half">Value</th>
                    </thead>
                    <tbody>
                    <tr ng-repeat="prop in chartCtrl.vivaGraph.vivaGraphOptions.node.properties | orderBy: 'name'">
                        <td title="{{prop.name}}" aria-label="{prop.name}}">{{prop.name | shortenValueFilter | replaceUnderscores | reduceStringLength: 13}}</td>
                        <td title="{{prop.value}}" aria-label="{prop.value}}">{{prop.value | shortenValueFilter | replaceUnderscores | reduceStringLength: 13}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Node resize properties -->
        <div class="col-xs-4 side-padding" ng-show="true" ng-class="{'col-xs-3': chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length > 0}">
            <div class="base-table-header">Node Resize Properties</div>
            <div class="prop-table-wrapper base-table-content">
                <div ng-if="chartCtrl.vivaGraph.vivaGraphOptions.graph.nodeResizeProperties.length === 0">None Available</div>
                <table class="table" ng-if="chartCtrl.vivaGraph.vivaGraphOptions.graph.nodeResizeProperties.length > 0">
                    <thead>
                    <tr>
                        <th>Node</th>
                        <th>Property</th>
                        <th class="tiny-column">
                            <button class="sm-btn btn-light" ng-click="chartCtrl.vivaGraph.resetNodeSizing()">Clear</button>
                        </th>
                    </thead>
                    <tbody>
                    <tr ng-repeat="nodeProp in chartCtrl.vivaGraph.vivaGraphOptions.graph.nodeResizeProperties">
                        <td title="{{nodeProp.nodeType}}" aria-label="{{nodeProp.nodeType}}">{{nodeProp.nodeType | replaceUnderscores | reduceStringLength: 18}}</td>
                        <td title="{{nodeProp.propName}}" aria-label="{nodeProp.propName}}">{{nodeProp.propName | replaceUnderscores | reduceStringLength: 18}}</td>
                        <td>
                            <input type="radio" class="prop-radio" name="chartCtrl.vivaGraph.vivaGraphOptions.graph.nodeResizeProperties" ng-value="nodeProp.propName" ng-model="nodeProp.selected" ng-click="chartCtrl.vivaGraph.nodeResizeProperty(nodeProp)">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Edge resize properties -->
        <div class="col-xs-4 side-padding" ng-show="true" ng-class="{'col-xs-3': chartCtrl.vivaGraph.vivaGraphOptions.node.properties.length > 0}">
            <div class="base-table-header">Edge Resize Properties</div>
            <div class="prop-table-wrapper base-table-content">
                <div ng-if="chartCtrl.vivaGraph.vivaGraphOptions.graph.edgeResizeProperties.length === 0">None Available</div>
                <table class="table" ng-if="chartCtrl.vivaGraph.vivaGraphOptions.graph.edgeResizeProperties.length > 0">
                    <thead>
                    <tr>
                        <th>Property</th>
                        <th class="tiny-column">
                            <button class="sm-btn btn-light" ng-click="chartCtrl.vivaGraph.internalControl.resetEdgeProps(chartCtrl.vivaGraph.vivaGraphOptions.graph.edgeResizeProperties)">Clear</button>
                        </th>
                    </thead>
                    <tbody>
                    <tr ng-repeat="edgeProp in chartCtrl.vivaGraph.vivaGraphOptions.graph.edgeResizeProperties">
                        <td title="{{edgeProp.propName}}" aria-label="{{edgeProp.propName}}">{{edgeProp.propName | replaceUnderscores | reduceStringLength: 18}}</td>
                        <td>
                            <input type="radio" class="prop-radio" name="chartCtrl.vivaGraph.vivaGraphOptions.graph.edgeResizeProperties" ng-value="edgeProp.propName" ng-model="edgeProp.selected" ng-click="chartCtrl.vivaGraph.internalControl.edgeResizeProperty(edgeProp)">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
